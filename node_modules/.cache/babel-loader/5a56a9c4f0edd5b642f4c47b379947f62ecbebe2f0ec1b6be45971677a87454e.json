{"ast":null,"code":"import _toConsumableArray from\"C:/Users/iliab/Desktop/vkrproject/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"C:/Users/iliab/Desktop/vkrproject/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import QPool from'./qpoll';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var App=function App(){//let i =0;\nvar _useState=useState([{id:0,question_type:'',question_text:'',answer:[]}]),_useState2=_slicedToArray(_useState,2),items=_useState2[0],setValue=_useState2[1];//Добавляем вопрос\nvar additem=function additem(){var i=0;for(var j=0;j<items.length;j++){if(items[j].id>i){i=items[j].id;}}i++;var newitem={id:i,question_type:'',question_text:'',answer:[]};setValue(function(prevState){return[].concat(_toConsumableArray(prevState),[newitem]);});//Вывод для проверки\nconsole.log(i);};//Удаляем вопрос\nvar deleteitem=function deleteitem(id){var count=items.length;if(count>1){setValue(function(prevState){var idx=prevState.findIndex(function(item){return item.id===id;});return[].concat(_toConsumableArray(prevState.slice(0,idx)),_toConsumableArray(prevState.slice(idx+1)));});//Для проверки\ncount--;}else{alert('Нельзя удалить единственный вопрос!');};//Для проверки\n//console.log(count);\n};//Получаем текст и варианты ответов на вопросы\nvar SetQuestion=function SetQuestion(id,type){var qtype=type;var qtext='';var qans=[];var inputs=document.getElementsByName('question_area_'+id);for(var j=0;j<inputs.length;j++){var a=inputs[j];qtext=a.value;}if(qtype!='short'||qtype!='long'){var inputs=document.getElementsByName('answer_area_'+id);for(var j=0;j<inputs.length;j++){var a=inputs[j];qans.push(a.value);}}var copy=Object.assign([],items);var idx=copy.findIndex(function(item){return item.id===id;});var newitem={id:id,question_type:qtype,question_text:qtext,answer:qans};copy[idx]=newitem;setValue(copy);/*setValue((prevState) => {\r\n            const idx = prevState.findIndex((item) => item.id === id);\r\n            const oldanswer = prevState[idx];\r\n            const newanswer = {...oldanswer, question_type: qtype, question_text: qtext, answer: qans};\r\n            if(idx===0){\r\n                return[newanswer,...prevState.slice(idx+1)];\r\n            }\r\n            else{\r\n                return[...prevState.slice(0,idx), newanswer,...prevState.slice(idx+1)];\r\n            }\r\n        });*/console.log(qtype);console.log(qtext);};return/*#__PURE__*/_jsxs(\"div\",{className:\"mainp\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"shablon_title\"}),/*#__PURE__*/_jsx(\"h1\",{children:\"\\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u043B\\u043E\\u0433\\u043E\\u0442\\u0438\\u043F \\u043A\\u043E\\u043C\\u043F\\u0430\\u043D\\u0438\\u0438\"}),/*#__PURE__*/_jsxs(\"select\",{id:\"logoselect\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"OKB\",children:\"OKB\"}),/*#__PURE__*/_jsx(\"option\",{value:\"QWE\",children:\"QWE\"})]}),items.map(function(item){return/*#__PURE__*/_jsx(QPool,{id:item.id,qtype:item.question_type,qtext:item.question_text,ans:item.answer,image_delete:require('../images/close.png'),onDeleted:deleteitem,setInfo:SetQuestion},item.id);}),/*#__PURE__*/_jsxs(\"button\",{id:\"addtask\",onClick:additem,children:[/*#__PURE__*/_jsx(\"img\",{src:require('../images/plus.png'),alt:\"add\"}),/*#__PURE__*/_jsx(\"h1\",{children:\"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u0432\\u043E\\u043F\\u0440\\u043E\\u0441\"})]}),/*#__PURE__*/_jsx(\"button\",{id:\"addtask\",children:/*#__PURE__*/_jsx(\"h1\",{children:\"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\"})})]});};","map":{"version":3,"names":["React","useState","QPool","App","id","question_type","question_text","answer","items","setValue","additem","i","j","length","newitem","prevState","console","log","deleteitem","count","idx","findIndex","item","slice","alert","SetQuestion","type","qtype","qtext","qans","inputs","document","getElementsByName","a","value","push","copy","Object","assign","map","require"],"sources":["C:/Users/iliab/Desktop/vkrproject/src/components/App.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport QPool from './qpoll';\r\n\r\n\r\nexport const App = () => {\r\n\r\n    //let i =0;\r\n    const [items, setValue] = useState([{\r\n        id: 0,\r\n        question_type: '',\r\n        question_text: '',\r\n        answer: []        \r\n    }]);\r\n\r\n    //Добавляем вопрос\r\n    const additem = () => {\r\n        let i = 0;\r\n        for(var j=0;j<items.length;j++){\r\n            if(items[j].id>i){\r\n                i=items[j].id;\r\n            }\r\n        }\r\n        i++;\r\n        var newitem = {\r\n            id: i,\r\n            question_type: '',\r\n            question_text: '',\r\n            answer: []\r\n        };\r\n        setValue((prevState) => [...prevState, newitem]);\r\n        //Вывод для проверки\r\n        console.log(i);\r\n    };\r\n    //Удаляем вопрос\r\n    const deleteitem = (id) =>{\r\n        var count = items.length;\r\n        if(count > 1){\r\n            setValue((prevState) => {\r\n                const idx = prevState.findIndex((item) => item.id === id);\r\n                return[...prevState.slice(0,idx), ...prevState.slice(idx+1)];\r\n            });\r\n            //Для проверки\r\n            count--;\r\n        } \r\n        else{ \r\n            alert('Нельзя удалить единственный вопрос!');\r\n        };\r\n        //Для проверки\r\n        //console.log(count);\r\n    };\r\n    //Получаем текст и варианты ответов на вопросы\r\n    const SetQuestion = (id, type) =>{\r\n        var qtype = type;\r\n        var qtext ='';\r\n        var qans =[];\r\n        var inputs = document.getElementsByName('question_area_' + id);\r\n        for (var j = 0; j < inputs.length; j++) {\r\n            var a = inputs[j];\r\n            qtext = a.value;\r\n        }\r\n        if((qtype != 'short') || (qtype != 'long')){\r\n            var inputs = document.getElementsByName('answer_area_' + id);\r\n            for (var j = 0; j < inputs.length; j++) {\r\n                var a = inputs[j];\r\n                qans.push(a.value);\r\n            }\r\n        }\r\n        var copy = Object.assign([], items);\r\n        var idx = copy.findIndex((item) => item.id === id);\r\n        var newitem={\r\n            id: id,\r\n            question_type: qtype,\r\n            question_text: qtext,\r\n            answer: qans\r\n        };\r\n        copy[idx]=newitem;\r\n        setValue(copy);\r\n        /*setValue((prevState) => {\r\n            const idx = prevState.findIndex((item) => item.id === id);\r\n            const oldanswer = prevState[idx];\r\n            const newanswer = {...oldanswer, question_type: qtype, question_text: qtext, answer: qans};\r\n            if(idx===0){\r\n                return[newanswer,...prevState.slice(idx+1)];\r\n            }\r\n            else{\r\n                return[...prevState.slice(0,idx), newanswer,...prevState.slice(idx+1)];\r\n            }\r\n        });*/\r\n        console.log(qtype);\r\n        console.log(qtext);\r\n    };\r\n\r\n\r\n    return(\r\n        <div className = \"mainp\">\r\n            <h1>Название</h1>\r\n            <input type = \"text\" id = \"shablon_title\"></input>\r\n            <h1>Выберите логотип компании</h1>\r\n            <select id =\"logoselect\">\r\n                <option value=\"OKB\">OKB</option>\r\n                <option value=\"QWE\">QWE</option>\r\n            </select>\r\n\r\n                {\r\n                    items.map((item) => {\r\n                        return(\r\n                            <QPool \r\n                            key={item.id} \r\n                            id={item.id} \r\n                            qtype={item.question_type} \r\n                            qtext={item.question_text}\r\n                            ans={item.answer}\r\n                            image_delete={require('../images/close.png')}\r\n                            onDeleted={deleteitem}\r\n                            setInfo={SetQuestion}>\r\n                            </QPool>\r\n                        );\r\n                    })\r\n                }\r\n            \r\n            <button id=\"addtask\" onClick={additem}>\r\n                <img src={require('../images/plus.png')} alt='add'></img>\r\n                <h1>Добавить вопрос</h1>\r\n            </button>\r\n            <button id=\"addtask\">\r\n                <h1>Сохранить</h1>\r\n            </button>\r\n        </div>\r\n    );\r\n\r\n};"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}